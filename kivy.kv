<TooltipIcon@MDFloatingActionButton+MDTooltip>
<Scr@MDScreen>
    FitImage:
        source: 'scr/4882066.jpg'
        size_hint_y: 1
        pos_hint: {"center_x": .5, "center_y": .5}
<ContentNavigationDrawer>:
    orientation: "vertical"
    padding: "8dp"
    spacing: "8dp"

    AnchorLayout:
        anchor_x: "left"
        size_hint_y: None



        MDNavigationDrawerHeader:
            title: "Уведомление"
            title_color: "#4a4939"
            text: "2 оповещений"



    ScrollView:

        MDList:
            id: md_list
            MDExpansionPanelThreeLine:
                id: cancel_lesson
                text: "Отмена занятий"
                secondary_text: "Отмена занятий в связи с плохой погодой следущие занятие по расписанию"
                tertiary_text: "02.10.2009"
                IconLeftWidget:
                    icon: "table-cancel"
            MDExpansionPanelThreeLine:
                text: "Начисление"
                secondary_text: "начисление за хорошее поведенние"
                tertiary_text: "02.11.2009"
                IconLeftWidget:
                    icon: "decimal-comma-increase"


<DrawerClickableItem@MDNavigationDrawerItem>
    focus_color: "#e7e4c0"
    text_color: "#4a4939"
    icon_color: "#4a4939"
    ripple_color: "#c5bdd2"
    selected_color: "#0c6c4d"


<DrawerLabelItem@MDNavigationDrawerItem>
    text_color: "#4a4939"
    icon_color: "#4a4939"
    focus_behavior: False
    selected_color: "#4a4939"
    _no_ripple_effect: True

Screen:
    screen_manager: screen_manager
    nav_drawer: nav_drawer
    MDNavigationLayout:

        MDScreenManager:
            id: screen_manager
            Scr:
                name: "login_screen"
                MDCard:
                    size_hint: .8, .88
                    pos_hint: {"center_x": .5, "center_y": .5}
                    elevation: 6
                    orientation: "vertical"
                    MDFloatLayout:
                        Image:
                            source: "scr/logo.png"
                            halign: 'center'
                            pos_hint: {"center_x": .5, "center_y": .93}
                            size_hint: .85, .12
                            height: "100dp"
                        MDLabel:
                            text: "ВХОД"
                            font_size: "30sp"
                            pos_hint: {"center_x": .89, "center_y": .72}
#                        FitImage:
#                            source: 'scr/logo.png'
#                            size_hint: .1, .3
                        MDTextField:
                            id: login
                            mode: "rectangle"
                            size_hint: .85, .09
                            width: "400dp"
                            hint_text: "Логин"
                            text_color_active: 1,1,1,1
                            pos_hint: {"center_x": .5, "center_y": .62}
                        MDTextField:
                            id: password
                            mode: "rectangle"
                            size_hint: .85, .09
                            width: "400dp"
                            hint_text: "Пароль"
                            pos_hint: {"center_x": .5, "center_y": .48}
                        MDRaisedButton:
                            text: " Войти "
                            text_size: "39sp"
                            pos_hint: {"center_x": .5, "center_y": .315}
                            on_release:
                                app.log_in()
            MDScreen:
                name: 'main_screen'
                FitImage:
                    source: 'scr/3661943.jpg'
                    size_hint_y: .4
                    pos_hint: {"center_x": .5, "center_y": .815}
                BoxLayout:
                    orientation: 'vertical'
                    MDFloatLayout:
                        size_hint: 1, .12
                        TooltipIcon:
                            icon: 'bell'
                            tooltip_text: "Уведомления"
                            icon_size: '25sp'
                            pos_hint: {'center_x': .9, 'center_y': .3}
                            on_release:
                                nav_drawer.set_state("open")
                        MDBoxLayout:
                            orientation: 'horizontal'
                            pos_hint: {'center_x': .53, 'center_y': .3}
                            size_hint: 1, .12
                            TooltipIcon:
                                icon: "account-child"
                                tooltip_text: "Профиль"
                                pos_hint: {'center_x': .1, 'center_y': .3}
                                icon_size: '30sp'
                                on_release:
                                    app.screen("user_profile")
                            MDFlatButton:
                                id: name_main_screen
                                text: "Андрей ›"
                                font_style: "Subtitle2"
                                font_size: '30sp'
                                pos_hint: {'center_x': .296, 'center_y': .3}
                                on_release:
                                    app.screen("user_profile")
                    MDFloatLayout:
                        size_hint: 1, .2
                        MDCard:
                            size_hint: .8, .40
                            pos_hint: {"center_x": .5, "center_y": .3}
                            elevation: 6
                            orientation: "vertical"
                            MDLabel:
                                size_hint: 1, .4
                                id: balance_user
                                text: "15КК"
                                font_size: '40sp'
                                halign: 'center'
                    MDFloatLayout:
                        size_hint: 1, .3
                        TooltipIcon:
                            icon: 'shopping'
                            tooltip_text: 'Потратить балы'
                            pos_hint: {'center_x': .5, 'center_y': .7}
                    MDTabs:
                        id: tabs
                        Tab:
                            title: "          История         "
                            ScrollView:
                                MDList:
                                    id: scroll_history

                        Tab:
                            title: "         Магазин         "
                            MDScrollView:
                                GridLayout:
                                    spacing: 3
                                    padding: 3
                                    cols:3
                                    size_hint: 1, 1.2
                                    MDCard:
                                        size_hint: 1, 1
                                        pos_hint: {"center_x": .1, "center_y": .5}
                                        elevation: 6
                                        orientation: "vertical"
                                        MDFloatLayout:
                                            MDIconButton:
                                                icon: "scr/vr-icon.png"
                                                icon_size: "90sp"
                                                pos_hint: {"center_x": .5, "center_y": .7}
                                            MDFlatButton:
                                                text: 'Игра в VR шлеме'
                                                font_size: "14sp"
                                                pos_hint: {"center_x": .5, "center_y": .4}
                                            MDFlatButton:
                                                text: "20"
                                                font_size: "23sp"
                                                pos_hint: {"center_x": .26, "center_y": .2}
                                            MDRaisedButton:
                                                text: "Купить"
                                                pos_hint: {"center_x": .7, "center_y": .2}
                                                size_hint: .08, .09
                                    MDCard:
                                        size_hint: 1, 1
                                        pos_hint: {"center_x": .5, "center_y": .9}
                                        elevation: 6
                                        orientation: "vertical"
                                        MDFloatLayout:
                                            MDIconButton:
                                                icon: "scr/cap.png"
                                                icon_size: "90sp"
                                                pos_hint: {"center_x": .5, "center_y": .7}
                                            MDFlatButton:
                                                text: 'Бейсболка'
                                                font_size: "14sp"
                                                pos_hint: {"center_x": .5, "center_y": .4}
                                            MDFlatButton:
                                                text: "60"
                                                font_size: "23sp"
                                                pos_hint: {"center_x": .26, "center_y": .2}
                                            MDRaisedButton:
                                                text: "Купить"
                                                pos_hint: {"center_x": .7, "center_y": .2}
                                                size_hint: .08, .09
                                    MDCard:
                                        size_hint: 1, 1
                                        pos_hint: {"center_x": .5, "center_y": .9}
                                        elevation: 6
                                        orientation: "vertical"
                                        MDFloatLayout:
                                            MDIconButton:
                                                icon: "scr/mug.png"
                                                icon_size: "90sp"
                                                pos_hint: {"center_x": .5, "center_y": .7}
                                            MDFlatButton:
                                                text: 'Кружка'
                                                font_size: "14sp"
                                                pos_hint: {"center_x": .5, "center_y": .4}
                                            MDFlatButton:
                                                text: "50"
                                                font_size: "23sp"
                                                pos_hint: {"center_x": .26, "center_y": .2}
                                            MDRaisedButton:
                                                text: "Купить"
                                                pos_hint: {"center_x": .7, "center_y": .2}
                                                size_hint: .08, .09
                                    MDCard:
                                        size_hint: 1, 1
                                        pos_hint: {"center_x": .1, "center_y": .5}
                                        elevation: 6
                                        orientation: "vertical"
                                        MDFloatLayout:
                                            MDIconButton:
                                                icon: "scr/shopper.png"
                                                icon_size: "90sp"
                                                pos_hint: {"center_x": .5, "center_y": .7}
                                            MDFlatButton:
                                                text: 'Шопер'
                                                font_size: "14sp"
                                                pos_hint: {"center_x": .5, "center_y": .4}
                                            MDFlatButton:
                                                text: "60"
                                                font_size: "23sp"
                                                pos_hint: {"center_x": .26, "center_y": .2}
                                            MDRaisedButton:
                                                text: "Купить"
                                                pos_hint: {"center_x": .7, "center_y": .2}
                                                size_hint: .08, .09
                                    MDCard:
                                        size_hint: 1, 1
                                        pos_hint: {"center_x": .5, "center_y": .9}
                                        elevation: 6
                                        orientation: "vertical"
                                    MDCard:
                                        size_hint: 1, 1
                                        pos_hint: {"center_x": .5, "center_y": .9}
                                        elevation: 6
                                        orientation: "vertical"
                                    MDCard:
                                        size_hint: 1, 1
                                        pos_hint: {"center_x": .1, "center_y": .5}
                                        elevation: 6
                                        orientation: "vertical"
                                    MDCard:
                                        size_hint: 1, 1
                                        pos_hint: {"center_x": .5, "center_y": .9}
                                        elevation: 6
                                        orientation: "vertical"
                                    MDCard:
                                        size_hint: 1, 1
                                        pos_hint: {"center_x": .5, "center_y": .9}
                                        elevation: 6
                                        orientation: "vertical"
                        Tab:
                            title: "         Начисление      "
                            MDTabs:
                                Tab:
                                    title: "                  Конкурсы                       "
                                    id: charge_contests
                                Tab:
                                    title: "                  Другое                       "
                                    ScrollView:
                                        MDList:
                                            OneLineAvatarListItem:
                                                text: "за отличную работу на занятии"
                                                IconLeftWidget:
                                                    icon: "numeric-1"
                                            OneLineAvatarListItem:
                                                text: "за проектную работу"
                                                IconLeftWidget:
                                                    icon: "numeric-5"
                                            OneLineAvatarListItem:
                                                text: "за участие в инженерном волонтерстве"
                                                IconLeftWidget:
                                                    icon: "numeric-2"
                                            OneLineAvatarListItem:
                                                text: "за участие в мероприятиях от технопарка повышающий имидж ДТ Кванториум"
                                                IconLeftWidget:
                                                    icon: "numeric-2"
            MDScreen:
                name: 'user_profile'
                MDCard:
                    size_hint: .8, .88
                    pos_hint: {"center_x": .5, "center_y": .5}
                    elevation: 6
                    orientation: "vertical"
                    MDFloatLayout:

                        TooltipIcon:
                            icon: "arrow-left"
                            tooltip_text: 'Назад'
                            pos_hint: {"center_x": .13, "center_y": .92}
                            icon_size: "43sp"
                            on_release:
                                app.screen('main_screen')

                        MDIconButton:
                            id: iconadmin
                            pos_hint: {"center_x": .5, "center_y": .87}
                            icon_size: "120sp"
                            icon: "account-circle-outline"
                            on_release: app.file_manager_open(1)

                        MDLabel:
                            id: name_profile_main
                            text: "Васильев\nАндрей Витальевич"
                            font_style: "Button"
                            size_hint_y: None
                            halign: "center"
                            font_size: "25sp"
                            pos_hint: {"center_x": .5, "center_y": .74}
                        MDLabel:
                            id: birthday_profile_main
                            text: "02.10.2009"
                            font_style: "Subtitle1"
                            size_hint_y: None
                            halign: "center"
                            font_size: "23sp"
                            pos_hint: {"center_x": .5, "center_y": .665}
                        ScrollView:
                            pos_hint: {"center_x": .5, "center_y": .15}
                            MDList:
                                scroll_y: None
                                OneLineAvatarListItem:
                                    on_release: app.screen("login_screen")
                                    text: "Выйти"
                                    IconLeftWidget:
                                        icon: "exit-to-app"
                        MDFillRoundFlatIconButton:
                            icon: 'exit-to-app'
                            text: 'Выйти'
                            on_release: app.screen("login_screen")
                            pos_hint: {"center_x": .5, "center_y": .12}
            MDScreen:
                name: "admin_screen"
                MDCard:
                    size_hint: .8, .88
                    pos_hint: {"center_x": .5, "center_y": .5}
                    elevation: 6
                    orientation: "vertical"
                    MDFloatLayout:

                        MDIconButton:
                            id: iconadmin
                            pos_hint: {"center_x": .5, "center_y": .87}
                            icon_size: "120sp"
                            icon: "account-circle-outline"
                            on_release: app.file_manager_open(1)

                        MDLabel:
                            text: "Васильев\nАндрей Витальевич"
                            font_style: "Button"
                            size_hint_y: None
                            halign: "center"
                            font_size: "30sp"
                            pos_hint: {"center_x": .5, "center_y": .74}
                        MDLabel:
                            text: "02.10.2009"
                            font_style: "Subtitle1"
                            size_hint_y: None
                            halign: "center"
                            font_size: "23sp"
                            pos_hint: {"center_x": .5, "center_y": .665}
                        ScrollView:
                            pos_hint: {"center_x": .5, "center_y": .15}
                            MDList:
                                scroll_y: None
                                OneLineAvatarListItem:
                                    on_release: app.screen("settingsadmin")
                                    text: "account-group"
                                    IconLeftWidget:
                                        icon: "account-plus"
                                OneLineAvatarListItem:
                                    text: "Выйти"
                                    on_release: app.screen('login_screen')
                                    IconLeftWidget:
                                        icon: "exit-to-app"
                        MDFillRoundFlatIconButton:
                            icon: 'exit-to-app'
                            text: 'Выйти'
                            pos_hint: {"center_x": .5, "center_y": .12}
                            on_release: app.screen('login_screen')
            Scr:
                name:  "settingsadmin"
                MDFloatLayout:
                    MDLabel:
                        text: "Заполините данные\nнового преподавателя"
                        pos_hint: {"center_x": .5, "center_y": .9}
                        font_size: '45sp'
                        halign: 'center'
                    MDTextField:
                        id: login_admin_new
                        mode: "rectangle"
                        size_hint: .85, .07
                        width: "400dp"
                        hint_text: "Логин"
                        pos_hint: {"center_x": .5, "center_y": .75}
                    MDIconButton:
                        icon: "scr/repeat.png"
                        on_release: app.generate()
                        pos_hint: {"center_x": .88, "center_y": .75}
                    MDTextField:
                        id: password_admin_new
                        mode: "rectangle"
                        size_hint: .85, .07
                        width: "400dp"
                        hint_text: "Пароль"
                        pos_hint: {"center_x": .5, "center_y": .65}
                    MDTextField:
                        id: name_admin_new
                        mode: "rectangle"
                        size_hint: .85, .07
                        width: "400dp"
                        hint_text: "ФИО"
                        pos_hint: {"center_x": .5, "center_y": .55}
                    MDTextField:
                        id: birthday_admin_new
                        mode: "rectangle"
                        size_hint: .85, .07
                        width: "400dp"
                        hint_text: "День рождение"
                        pos_hint: {"center_x": .5, "center_y": .45}
                    MDTextField:
                        id: email_new_admin
                        mode: "rectangle"
                        size_hint: .85, .07
                        width: "400dp"
                        hint_text: "Почта"
                        pos_hint: {"center_x": .5, "center_y": .35}
                    MDRaisedButton:
                        text: "Создать"
                        text_size: "39sp"
                        pos_hint: {"center_x": .5, "center_y": .15}
                        on_release:
                            app.registration("Admin_screen")
            Scr:
                name: 'teacher_screen'
                MDBoxLayout:
                    orientation: 'vertical'
                    MDFloatLayout:
                        size_hint: 1, .14
                        md_bg_color: 1, 1, 1, 0.2
                        MDIconButton:
                            icon: 'account-circle-outline'
                            icon_size: '60sp'
                            pos_hint: {"center_x": .15, "center_y": .5}
                        MDLabel:
                            id: name_teacher_screen
                            pos_hint: {"center_x": .8, "center_y": .75}
                            text: "Михайлов Сергей Генадьевич"
                            font_size: '25sp'
                        MDLabel:
                            id: birthday_teacher_screen
                            text: '29.04.1980'
                            pos_hint: {"center_x": .8, "center_y": .5}
                            font_size: '25sp'
                        MDLabel:
                            id: id_teacher_screen
                            text: 'ID: 265265'
                            pos_hint: {"center_x": .8, "center_y": .25}
                            font_size: '25sp'
                        MDIconButton:
                            icon: 'exit-to-app'
                            icon_size: '35sp'
                            tooltip_text: "Назад"
                            pos_hint: {"center_x": .935, "center_y": .25}
                            on_release: app.screen("login_screen")
                    MDBoxLayout:
                        orientation: "vertical"
                        size_hint_y: None
                        height: "4dp"
                        md_bg_color: 1, 1, 1, 0.2
                    MDBoxLayout:
                        orientation: 'vertical'
                        size_hint: 1, .8
                        spacing: dp(10)
                        padding: dp(20)
                        MDFloatLayout:
                            adaptive_height: True

                            MDIconButton:
                                icon_size: '25sp'
                                md_bg_color: "#222126"
                                icon_color: "#ffffff"
                                icon: "account-plus"
                                pos_hint: {"center_x": .97, "center_y": .5}
                                on_release: app.screen("new_users")
                            MDTextField:
                                id: search_students
                                mode: "round"
                                size_hint: .75, .40
                                pos_hint: {"center_x": .5, "center_y": .5}
                                hint_text: 'Поиск по ФИО, Дата рождения, ID'
                                on_text: app.search_students(self.text, True)
                            MDIconButton:
                                icon: 'magnify'
                                pos_hint: {"center_x": .85, "center_y": .5}
                        MDScrollView:
                            MDList:
                                id: container
            Scr:
                name: "new_users"
                MDBoxLayout:
                    orientation: 'vertical'
                    MDFloatLayout:
                        size_hint: 1, .3
                        id: boxlayout
                        MDCard:
                            id: card_for_clear
                            size_hint: .8, .5
                            pos_hint: {"center_x": .5, "center_y": .6}
                            elevation: 6
                            orientation: "vertical"
                            MDLabel:
                                id: text_hint_create
                                pos_hint: {"center_x": .54, "center_y": .5}

                        MDRaisedButton:
                            id: boxlayout_download
                            text: 'Загрузите .xls файл'
                            pos_hint: {"center_x": .5, "center_y": .15}
                            on_release: app.manager_file_exel_open()
                        MDIconButton:
                            icon: 'arrow-left-bold-box-outline'
                            icon_size: '35sp'
                            tooltip_text: "Назад"
                            pos_hint: {"center_x": .95, "center_y": .15}
                            on_release: app.screen("teacher_screen")

                    MDBoxLayout:
                        orientation: "vertical"
                        size_hint_y: None
                        height: "3dp"
                        md_bg_color: 1, 1, 1, 0.2
                    ScrollView:
                        MDBoxLayout:
                            id: generate_table

        MDNavigationDrawer:
            id: nav_drawer
            anchor: "right"
            ContentNavigationDrawer:
                screen_manager: screen_manager
                nav_drawer: nav_drawer


